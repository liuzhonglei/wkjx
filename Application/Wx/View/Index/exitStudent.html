<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>完善信息</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="stylesheet" href="__PUBLIC__/css/sm.css">

  </head>
  <body>
    <div class="page-group">
<div class="page page-current">
<header class="bar bar-nav">
<h1 class='title'>完善信息</h1>
</header>
<div class="content"> 
<form action="{:U('Wx/Index/exitStu')}" method="post" onsubmit = "return checkUser();" id = "userMsg">
  <input type="hidden" name="id" value="{$data['id']}">
  <div class="list-block">
    <ul>
      <!-- Text inputs -->
      <li>
        <div class="item-content">
          <div class="item-media"><i class="icon icon-form-name"></i></div>
          <div class="item-inner">
            <div class="item-title label">昵称</div>
            <div class="item-input">
              <input type="text" name="nickname" id = "nickname" placeholder="昵称" value="{$data['nickname']}">
            </div>
          </div>
        </div>
      </li>
      <li>
        <div class="item-content">
          <div class="item-media"><i class="icon icon-form-name"></i></div>
          <div class="item-inner">
            <div class="item-title label">姓名</div>
            <div class="item-input">
              <input type="text" value="{$data['username']}"  name="username" value="" id="username" placeholder="姓名">
            </div>
          </div>
        </div>
      </li>
      <li>
        <div class="item-content">
          <div class="item-media"><i class="icon icon-form-email"></i></div>
          <div class="item-inner">
            <div class="item-title label">手机</div>
            <div class="item-input">
              <input type="tel" name="phone" value="{$data['phone']}"  id="phone" placeholder="手机">
            </div>
          </div>
        </div>
      </li>
      <li>
        <div class="item-content">
          <div class="item-media"><i class="icon icon-form-email"></i></div>
          <div class="item-inner">
            <div class="item-title label">邮箱</div>
            <div class="item-input">
              <input type="email" name="email" value="{$data['email']}" id = "email" placeholder="E-mail">
            </div>
          </div>
        </div>
      </li>
      <li>
        <div class="item-content">
          <div class="item-media"><i class="icon icon-form-name"></i></div>
          <div class="item-inner">
            <div class="item-title label">地址</div>
            <div class="item-input">
              <input type="text" name="address" value="{$data['address']}" id = "address" placeholder="地址">
            </div>
          </div>
        </div>
      </li>
      <li>
        <div class="item-content">
          <div class="item-media"><i class="icon icon-form-gender"></i></div>
          <div class="item-inner">
            <div class="item-title label">性别</div>
            <div class="item-input">
              <select name="sex">
                <option value="1" id="one">男</option>
                <option value="2" id="two">女</option>
                <option value="0" id="three">保密</option>
              </select>
            </div>
          </div>
        </div>
      </li>

      <!-- Date -->
      <li>
        <div class="item-content">
          <div class="item-media"><i class="icon icon-form-calendar"></i></div>
          <div class="item-inner">
            <div class="item-title label">年龄</div>
            <div class="item-input">
              <input type="text" name = "age" value="{$data['age']}" id ="age" placeholder="年龄" >
            </div>
          </div>
        </div>
      </li>
      <li class="align-top">
        <div class="item-content">
          <div class="item-media"><i class="icon icon-form-comment"></i></div>
          <div class="item-inner">
            <div class="item-title label">教练</div>
            <div class="item-input">
              <select name="coach" id ="coach" value ="">
                <foreach name="coach" item="vo" >
                    <option value="{$vo.id}" id="{$vo.id}">{$vo.username}</option>
                </foreach>
              </select>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div class="content-block">
    <div class="row">
      <div class="col-100"><submit onclick = "checkUser()" class="button button-big button-fill button-success">保存</submit></div>
    </div>
  </div>
</div>
</form>
    </div>
    </div>
  </body>
</html>
<script>



function checkUser(){
   var nickname = document.getElementById("nickname").value;
   var username = document.getElementById("username").value;
   var phone = document.getElementById("phone").value;
   var email = document.getElementById("email").value;
   var address = document.getElementById("address").value;
   var age = document.getElementById("age").value;
   var coach = document.getElementById("coach").value;

   if(nickname == ""  ){
     alert("昵称不能为空");
     return false;
   }
   if(username == ""  ){
     alert("姓名不能为空");
     return false;
   }
  if(phone == ""  ){
     alert("手机号不能为空");
     return false;
   }
  if(email == ""  ){
     alert("邮箱不能为空");
     return false;
   }
  if(address == ""  ){
    alert("地址不能为空");
     return false;
   }
    if(age == ""  ){
    alert("年龄不能为空");
     return false;
   }
    if(coach == ""  ){
    alert("请选择教练");
     return false;
   }
  if(!(/^1[3|5|7|8][0-9]\d{4,8}$/.test(phone))){ 
        alert("请输入正确的手机号"); 
        return false; 
    }
    var reg = new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"); //正则表达式
　　if(!reg.test(email)){ //正则验证不通过，格式不对
　　　　alert("请输入正确的邮箱!");
　　　　return false;
　　}
  
  document.getElementById("userMsg").submit();
}
window.onload = function () {
       if({$data['sex']}=="1"){
          document.getElementById('one').selected =true;
      }else if({$data['sex']}=="2"){
          document.getElementById('two').selected =true;
      }else{
          document.getElementById('three').selected =true;
      }
       document.getElementById({$data['coach']}).selected =true;
}  
</script>